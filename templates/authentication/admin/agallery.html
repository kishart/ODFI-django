<!DOCTYPE html>
<html>
<head>
    <title>Media Upload</title>
</head>
<body>
    <h2>Upload Media</h2>
    <form method="POST" enctype="multipart/form-data">
        {% csrf_token %}
        {{ form.as_p }}
        <button type="submit">Upload</button>
    </form>

    <h2>Uploaded Media</h2>
    <table border="1">
        <thead>
            <tr>
                <th>Preview</th>
                <th>Category</th>
                <th>Description</th>
                <th>Uploaded</th>
            </tr>
        </thead>
        <tbody>
            {% for media in media_list|default_if_none:"" %}
            <tr>
                <td>
                    {% if media.is_video %}
                        <video width="160" height="100" controls>
                            <source src="{{ media.file.url }}" type="video/mp4">
                            Your browser does not support the video tag.
                        </video>
                    {% else %}
                        <img src="{{ media.file.url }}" width="160" height="100" style="object-fit: cover;">
                    {% endif %}
                </td>
                <td>{{ media.category }}</td>
                <td>{{ media.description }}</td>
                <td>{{ media.uploaded_at }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</body>
</html>
